{"ast":null,"code":"var _jsxFileName = \"/home/shinbe69/Desktop/React/stationery-shop/src/components/login/signupForm/signupForm.js\",\n  _s = $RefreshSig$();\nimport { useContext, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { MessageContext } from '../../../AppContainer';\nimport { showPopup, selectTypeOfPopup } from '../../popup/popup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SignupForm() {\n  _s();\n  const navigate = useNavigate();\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [reEnterPassword, setReEnterPassword] = useState(\"\");\n  const [message, setMessage] = useContext(MessageContext);\n\n  //handle signup\n  function handleSignup(event) {\n    event.preventDefault();\n    if (!username.includes('@') && !username.includes('0')) {\n      selectTypeOfPopup('WARNING');\n      setMessage('Vui lòng nhập email hoặc số điện thoại hợp lệ!');\n      showPopup();\n    } else if (!username.includes('@') && username.length !== 10) {\n      selectTypeOfPopup('WARNING');\n      setMessage('Vui lòng nhập số điện thoại hợp lệ!');\n      showPopup();\n    } else if (password.length < 6) {\n      selectTypeOfPopup('WARNING');\n      setMessage('Mật khẩu phải có ít nhất 6 ký tự!');\n      showPopup();\n    } else {\n      if (event.target.id === 'register') {\n        if (password === reEnterPassword) {\n          fetch('/api/auth/signup', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Accept': 'application/json'\n            },\n            body: JSON.stringify({\n              username,\n              password,\n              reEnterPassword: reEnterPassword\n            })\n          }).then(res => {\n            if (res.status === 409) {\n              selectTypeOfPopup('WARNING');\n              setMessage('Tài khoản đã tồn tại trong hệ thống');\n              showPopup();\n              return;\n            } else if (res.status === 500) {\n              selectTypeOfPopup('WARNING');\n              setMessage('Có lỗi xảy ra ở hệ thống, vui lòng thử lại');\n              showPopup();\n              return;\n            } else res.json();\n          }).then(user => {\n            fetch('/api/auth/login', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json'\n              },\n              body: JSON.stringify({\n                username,\n                password\n              })\n            }).then(response => {\n              if (response.status === 200) {\n                navigate('/update-user-info', {\n                  state: username\n                });\n              }\n            }).catch(err => {\n              console.log(err);\n            });\n          });\n        } else {\n          setMessage('Xác nhận mật khẩu không trùng khớp!');\n          showPopup();\n        }\n      }\n    }\n  }\n  //handle change event of a username and password\n  function handleChange(event) {\n    let tartget = event.target.name;\n    if (tartget === \"username\") {\n      setUsername(event.target.value);\n    } else if (tartget === 'password') {\n      setPassword(event.target.value);\n    } else {\n      setReEnterPassword(event.target.value);\n    }\n  }\n  function handleBackButton() {\n    navigate('/login');\n  }\n  function handleOnKeyDown(event) {\n    if (event.key === 'Enter') handleSignup(event);\n  }\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    id: \"signupForm\",\n    className: \"form\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      name: \"username\",\n      onChange: handleChange,\n      onKeyDown: handleOnKeyDown,\n      placeholder: \"Email ho\\u1EB7c s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",\n      value: username\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      onChange: handleChange,\n      onKeyDown: handleOnKeyDown,\n      placeholder: \"M\\u1EADt kh\\u1EA9u\",\n      value: password\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"re-enterPassword\",\n      type: \"password\",\n      name: \"password1\",\n      onChange: handleChange,\n      onKeyDown: handleOnKeyDown,\n      placeholder: \"Nh\\u1EADp l\\u1EA1i m\\u1EADt kh\\u1EA9u\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      id: \"register\",\n      disabled: !(username !== \"\" && password !== \"\" && reEnterPassword !== \"\"),\n      onClick: handleSignup,\n      children: \"T\\u1EA1o t\\xE0i kho\\u1EA3n m\\u1EDBi\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      id: \"forgotPassword\",\n      children: \"Qu\\xEAn m\\u1EADt kh\\u1EA9u?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      id: \"back2Login\",\n      onClick: handleBackButton,\n      src: \"back.png\",\n      alt: \"back\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 13\n  }, this);\n}\n_s(SignupForm, \"WuLER14rHAugNeLyuaF5130p9lk=\", false, function () {\n  return [useNavigate];\n});\n_c = SignupForm;\nvar _c;\n$RefreshReg$(_c, \"SignupForm\");","map":{"version":3,"names":["useContext","useState","useNavigate","MessageContext","showPopup","selectTypeOfPopup","jsxDEV","_jsxDEV","SignupForm","_s","navigate","username","setUsername","password","setPassword","reEnterPassword","setReEnterPassword","message","setMessage","handleSignup","event","preventDefault","includes","length","target","id","fetch","method","headers","body","JSON","stringify","then","res","status","json","user","response","state","catch","err","console","log","handleChange","tartget","name","value","handleBackButton","handleOnKeyDown","key","className","children","type","onChange","onKeyDown","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","disabled","onClick","src","alt","_c","$RefreshReg$"],"sources":["/home/shinbe69/Desktop/React/stationery-shop/src/components/login/signupForm/signupForm.js"],"sourcesContent":["import { useContext, useState} from 'react'\nimport {useNavigate} from 'react-router-dom'\nimport { MessageContext } from '../../../AppContainer'\nimport { showPopup, selectTypeOfPopup } from '../../popup/popup'\n\nexport default function SignupForm() {\n    const navigate = useNavigate()\n    const [username, setUsername] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n    const [reEnterPassword, setReEnterPassword] = useState(\"\")\n    const [message, setMessage] = useContext(MessageContext)\n\n    //handle signup\n    function handleSignup(event) {\n        event.preventDefault()\n        if (!username.includes('@') && !username.includes('0')) {\n            selectTypeOfPopup('WARNING')\n            setMessage('Vui lòng nhập email hoặc số điện thoại hợp lệ!')\n            showPopup()\n        }\n        else if (!username.includes('@') && username.length !== 10) {\n            selectTypeOfPopup('WARNING')\n            setMessage('Vui lòng nhập số điện thoại hợp lệ!')\n            showPopup()\n        }\n        else if (password.length < 6) {\n            selectTypeOfPopup('WARNING')\n            setMessage('Mật khẩu phải có ít nhất 6 ký tự!')\n            showPopup()\n        }\n        else {\n            if (event.target.id === 'register') {\n                if (password === reEnterPassword) {\n                    fetch('/api/auth/signup', {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json',\n                            'Accept': 'application/json'\n                        },\n                        body: JSON.stringify({username, password, reEnterPassword: reEnterPassword})\n                        })\n                        .then(res => {\n                            if (res.status === 409) {\n                                selectTypeOfPopup('WARNING')\n                                setMessage('Tài khoản đã tồn tại trong hệ thống')\n                                showPopup()\n                                return\n                            }\n                            else if (res.status === 500) {\n                                selectTypeOfPopup('WARNING')\n                                setMessage('Có lỗi xảy ra ở hệ thống, vui lòng thử lại')\n                                showPopup()\n                                return\n                            }\n                            else res.json()\n                        })\n                        .then((user) => {\n                                fetch('/api/auth/login', {\n                                    method: 'POST',\n                                    headers: {\n                                        'Content-Type': 'application/json',\n                                        'Accept': 'application/json'\n                                    },\n                                    body: JSON.stringify({username, password})\n                                })\n                                .then((response) => {\n                                    if (response.status === 200) {\n                                        navigate('/update-user-info', {\n                                            state: username\n                                        })\n                                    }\n                                })\n                                .catch((err) => {\n                                    console.log(err)\n                                })\n                        })\n                }\n                else {\n                    setMessage('Xác nhận mật khẩu không trùng khớp!')\n                    showPopup()\n                }\n            }\n        }\n    }\n    //handle change event of a username and password\n    function handleChange(event) {\n        let tartget = event.target.name\n        if(tartget === \"username\") {\n            setUsername(event.target.value)\n        }\n        else if(tartget === 'password'){    \n            setPassword(event.target.value)\n        }\n        else {\n            setReEnterPassword(event.target.value)\n        }\n    }\n\n    function handleBackButton() {\n        navigate('/login')\n    }\n\n    function handleOnKeyDown(event) {\n        if (event.key === 'Enter')\n            handleSignup(event)\n    }\n\n    return (\n            <form id='signupForm' className='form'>\n                <input type='text' name='username' onChange={handleChange} onKeyDown={ handleOnKeyDown } placeholder='Email hoặc số điện thoại' value={ username }/>\n                <input type='password' name='password' onChange={handleChange} onKeyDown={ handleOnKeyDown } placeholder='Mật khẩu' value={ password }/>\n                <input id='re-enterPassword' type='password' name='password1' onChange={handleChange} onKeyDown={ handleOnKeyDown } placeholder='Nhập lại mật khẩu'/>\n                <p id='register' disabled={  !(username !== \"\" && password !== \"\" && reEnterPassword !== \"\") } onClick={ handleSignup }>Tạo tài khoản mới</p>\n                <p id='forgotPassword'>Quên mật khẩu?</p>\n                <img id='back2Login' onClick={ handleBackButton } src='back.png' alt='back'/>\n            </form>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}