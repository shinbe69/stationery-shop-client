{"ast":null,"code":"var _jsxFileName = \"/home/shinbe69/Desktop/React/stationery-shop/src/components/loginForm/loginForm.js\",\n  _s = $RefreshSig$();\nimport { useContext, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { MessageContext } from '../login/login';\nimport { useCookies } from 'react-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function LoginForm() {\n  _s();\n  const navigate = useNavigate();\n  const [cookie, setCookie, removeCookie] = useCookies();\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [message, setMessage] = useContext(MessageContext);\n\n  //handle submit button\n  function handleLogin(event) {\n    event.preventDefault();\n    if (!username.includes('@') && !username.includes('0')) {\n      setMessage('Vui lòng nhập email hoặc số điện thoại hợp lệ!');\n      showPopup();\n    } else if (password.length < 6) {\n      setMessage('Mật khẩu phải có ít nhất 6 ký tự!');\n      showPopup();\n    } else {\n      //lOGIN\n      fetch('/api/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          username: username,\n          password: password\n        })\n      }).then(response => {\n        if (response.status === 200) {\n          fetch('/api/users/updateCart', {\n            method: 'PATCH',\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              userID: cookie.user,\n              cart: {\n                id: product.state.id,\n                quantity\n              }\n            })\n          }).then(result => console.log(result.status)).catch(error => console.log(error));\n          document.location = '/';\n        } else {\n          setMessage('Tên đăng nhập hoặc mật khẩu không đúng!');\n          showPopup();\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }\n  //handle change event of a username and password\n  function handleChange(event) {\n    let tartget = event.target.name;\n    if (tartget === \"username\") {\n      setUsername(event.target.value);\n    } else if (tartget === 'password') {\n      setPassword(event.target.value);\n    }\n  }\n  function showPopup() {\n    document.getElementById('warningPopup').style.transform = 'translateY(-10vh)';\n    setTimeout(() => {\n      document.getElementById('warningPopup').style.transform = 'translateY(-50vh)';\n    }, 2500);\n  }\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    id: \"loginForm\",\n    className: \"form\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      name: \"username\",\n      onChange: handleChange,\n      placeholder: \"Email ho\\u1EB7c s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",\n      value: username\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      onChange: handleChange,\n      placeholder: \"M\\u1EADt kh\\u1EA9u\",\n      value: password\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      id: \"submitLogin\",\n      disabled: !(username !== \"\" && password !== \"\"),\n      onClick: handleLogin,\n      type: \"submit\",\n      value: \"\\u0110\\u0103ng nh\\u1EADp\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      id: \"register\",\n      onClick: () => navigate('/signup'),\n      children: \"T\\u1EA1o t\\xE0i kho\\u1EA3n m\\u1EDBi\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      id: \"forgotPassword\",\n      children: \"Qu\\xEAn m\\u1EADt kh\\u1EA9u?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n}\n_s(LoginForm, \"rRABug3/WC7k0wpnF1WkHpRj6Ew=\", false, function () {\n  return [useNavigate, useCookies];\n});\n_c = LoginForm;\nvar _c;\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["useContext","useState","useNavigate","MessageContext","useCookies","jsxDEV","_jsxDEV","LoginForm","_s","navigate","cookie","setCookie","removeCookie","username","setUsername","password","setPassword","message","setMessage","handleLogin","event","preventDefault","includes","showPopup","length","fetch","method","headers","body","JSON","stringify","then","response","status","userID","user","cart","id","product","state","quantity","result","console","log","catch","error","document","location","err","handleChange","tartget","target","name","value","getElementById","style","transform","setTimeout","className","children","type","onChange","placeholder","fileName","_jsxFileName","lineNumber","columnNumber","disabled","onClick","_c","$RefreshReg$"],"sources":["/home/shinbe69/Desktop/React/stationery-shop/src/components/loginForm/loginForm.js"],"sourcesContent":["import { useContext, useState} from 'react'\nimport {useNavigate} from 'react-router-dom'\nimport { MessageContext } from '../login/login'\nimport { useCookies } from 'react-cookie'\n\nexport default function LoginForm() {\n    const navigate = useNavigate()\n    const [cookie, setCookie, removeCookie] = useCookies()\n    const [username, setUsername] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n    const [message, setMessage] = useContext(MessageContext)\n\n    //handle submit button\n    function handleLogin(event) {\n        event.preventDefault()\n        if (!username.includes('@') && !username.includes('0')) {\n            setMessage('Vui lòng nhập email hoặc số điện thoại hợp lệ!')\n            showPopup()\n        }\n        else if (password.length < 6) {\n            setMessage('Mật khẩu phải có ít nhất 6 ký tự!')\n            showPopup()\n        }\n        else {\n            //lOGIN\n            fetch('/api/auth/login', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Accept': 'application/json'\n                },\n                body: JSON.stringify({username: username, password: password})})\n            .then((response) => {\n                if (response.status === 200) {\n                    fetch('/api/users/updateCart', {\n                        method: 'PATCH',\n                        headers: {\n                            'Accept': 'application/json',\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify({ userID: cookie.user, cart: {id: product.state.id, quantity}})\n                    }).then(result => console.log(result.status))\n                    .catch(error => console.log(error))\n                    document.location = '/'\n                }\n                else {\n                    setMessage('Tên đăng nhập hoặc mật khẩu không đúng!')\n                    showPopup()\n                }\n            })\n            .catch((err) => {\n                console.log(err)\n            })\n        }\n    }\n    //handle change event of a username and password\n    function handleChange(event) {\n        let tartget = event.target.name\n        if(tartget === \"username\") {\n            setUsername(event.target.value)\n        }\n        else if(tartget === 'password'){    \n            setPassword(event.target.value)\n        }\n    }\n\n\n    function showPopup() {\n        document.getElementById('warningPopup').style.transform = 'translateY(-10vh)'\n        setTimeout(() => {\n            document.getElementById('warningPopup').style.transform = 'translateY(-50vh)'\n        }, 2500)\n    }\n\n    return (\n        <form id='loginForm' className='form'>\n            <input type='text' name='username' onChange={handleChange} placeholder='Email hoặc số điện thoại' value={ username } />\n            <input type='password' name='password' onChange={handleChange} placeholder='Mật khẩu' value={ password } />\n            <input id='submitLogin' disabled={ !(username !== \"\" && password !== \"\") } onClick={ handleLogin } type='submit' value='Đăng nhập'/>\n            <p id='register' onClick={() => navigate('/signup') } >Tạo tài khoản mới</p>\n            <p id='forgotPassword'>Quên mật khẩu?</p>\n        </form>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}